# tyrano_jinro
『汝は人狼なりや？』をティラノスクリプト製のノベルゲームとして制作・プレイするためのプラグインやマクロ集、  
およびその実装例としてのサンプルゲームです。  
  
※まだ製作中なので利用はお控えください。  
完成の暁にはティラノスクリプト用プラグイン、マクロとして利用いただけるようにいたします。
  
# 動作確認バージョン
- Windows10
- ティラノスクリプト v520b(ver.0.4から)
- ティラノスタジオ v120(ver.0.4から)
  

# 更新履歴
- ver.0.4(20221016)
  - サンプルゲームの方向性を決定。
    - キャラクター、メッセージマクロ、タイトル画面、フレームやボタン表示、フォント表示など実装（画像やフォントは非同梱）
  - キャラクターの入退場マクロを作成。
  - キャラクター選択ボタンへのマウスホバーでも入退場マクロを実行するようにした。
- ver.0.3(20220820)
  - 議論フェイズ用アクションボタンの仮実装。呼び出し箇所は未作成。
  - 視点の破綻後は、破綻したキャラの視点は共通視点オブジェクトで上書き、その他の視点は破綻したキャラを人狼陣営で更新するようにした。
    - プレイヤーの占い騙りによる破綻は未ブロック。扱いは同様でいいと思う。
  - 人狼メニュー画面を作成。占いCO結果を一覧表示できるように。
    - 人狼メニュー画面から戻ってからゲームを進行するとエラーになるバグあり。
    - 「ステータス画面」に改称予定。
  - 各キャラクターに信頼度オブジェクトを実装。
  - 投票ロジック実装。
- ver.0.2(20210704)
  - [messageマクロ](./data/scenario/messageMacros.ks)と[messageサブルーチン](data/scenario/message)にセリフやシステムメッセージを集約
  - [playJinro.ks](./data/scenario/playJinro.ks)（scene1.ksから名称変更）をリファクタリング。キャラクターIDに依存していた処理をほぼ脱却
  - PCの役職を選択できる画面を追加（将来のステージ選択機能の仮実装）
- ver.0.1(20210627)
  - ある程度動いたところで初版公開
  

# TODO
- [ ] COフェイズ中の視点整理とNPCのCO意思の計算タイミングの再考（カットインのタイミングに被せられるか？）  
- [ ] NPCの思考と行動の雛形制作  
  - [ ] 自分や仲間が破綻する騙りCOはしない
  - [x] 再投票時に投票先が変わることがあるようにする
  - [x] 再投票が繰り返される場合の処理検討
- [ ] 議論フェイズの制作  
  - [x] アクション選択画面作成
  - [ ] PCのアクション処理作成
  - [ ] NPCの信頼度に影響させる
  - [ ] NPCのアクション処理作成
  - [ ] アクション選択画面から戻ってきた後の進行不能バグを解消する
- [ ] 投票フェイズの制作  
  - [ ] 投票結果画面を表示する
    - [ ] メモ：お笑い番組の結果発表風はどうか。縦割りで画面下にキャラ絵、その上に投票先キャラ名で順々にスライドインしてくる感じ
  - [ ] 投票結果テキストを表示する
  - [ ] 内部処理する
  - [ ] 投票結果画面から戻る
  - [ ] キャラのセリフを表示、退場させる
- [ ] ステータス画面作成
- [ ] メニュー画面作成
- [ ] 表情差分作る、差分表示しわける  
- [ ] ボイスを入れる
- [ ] BGM、演出を入れる
- [ ] バグ修正
- [ ] ゲームシナリオ作る
- [ ] 遊びの部分を作る
  - [ ] ステージ選択
  - [ ] 会話劇
  - [ ] アチーブメント
- [ ] 霊能者の実装（できれば）  
- [ ] 狩人の実装（できれば）  
- [ ] NPCの思考の強化学習（マジで言ってんの？）  
- [ ] ファイル構成の再検討  
  - [ ] マクロ.ksに記載するのはどうしてもティラノで書かないといけない内容だけにし、ロジックは可能な限りjs内に移植する
- [ ] docsやコメントの補完  
- [ ] リファクタリング  

and more....
  

# 製作者
香取犬  
Twitter：[@catoriinu8190](https://twitter.com/catoriinu8190)  
ブログ：[ハイグレ郵便局 香取犬支店](http://highglepostoffice.blog.fc2.com/)  
  

# special thanks
[https://github.com/ShikemokuMK/tyranoscript](https://github.com/ShikemokuMK/tyranoscript)  
[https://webkatu.com/201407132011-clone-function-to-deepcopy-object/](https://webkatu.com/201407132011-clone-function-to-deepcopy-object/)  
[https://ameblo.jp/personwritep/entry-12495099049.html](https://ameblo.jp/personwritep/entry-12495099049.html)
