# 用語定義
人狼プラグイン独自の用語やシステムについての用語集

## 視点オブジェクト（perspective）
「ある視点において、各キャラクターがどの役職に就いている可能性が残っているか」の割合を保持するオブジェクト。  
役職COや占い結果CO、処刑や襲撃によって、徐々に役職が確定していく。  
（より正確な表現としては、「絶対にありえない役職」の可能性を潰していくことによって役職を確定させていく。この処理を「可能性を0にする」の意味でzeronizeと呼ぶこととする）  
つまり、人狼ゲーム内で起こった事実に基づいた（その視点においての）真実を表す。  
```
{
    "zundamon":{"werewolf":1,"fortuneTeller":0,"villager":0,"madman":0},  // ずんだもんは人狼で確定
    "metan":{"werewolf":0,"fortuneTeller":0.5,"villager":0,"madman":0.5}, // めたんは占い師か狂人
    "tsumugi":{"werewolf":0,"fortuneTeller":0,"villager":1,"madman":0},   // つむぎは村人で確定
    "hau":{"werewolf":0,"fortuneTeller":0.5,"villager":0,"madman":0.5},   // はうは占い師か狂人
    "ritsu":{"werewolf":0,"fortuneTeller":0,"villager":1,"madman":0},     // リツは村人で確定
    "uncertified":{"werewolf":0,"fortuneTeller":1,"villager":0,"madman":1} // 未確定の役職の人数は占い師が1人、狂人が1人。人狼と村人は全員確定済み
}
// キャラクタ－IDがキーになっているオブジェクトは、中身の数値は割合なので合計すると1になる（小数の場合もあるため必ず1とは限らない）
// uncertifiedキーのオブジェクトは、中身は割合ではなく未確定の役職の人数を表す
```

### 自役職の視点オブジェクト（rolePerspective）
そのキャラ自身だけが知っている確定情報を加味した、そのキャラにとっての本来の視点オブジェクト。  
「そのキャラ自身だけが知っている確定情報」とは、自分の役職が何であるかや、自分が占い師の場合の占い結果など。  
投票時はこちらを参照する。

### CO役職の視点オブジェクト（perspective）
表向きの視点。そのキャラのCO済みの役職としての視点オブジェクト。  
CO役職が真役職の場合、自役職の視点オブジェクトと同一の値が入っている。  
CO役職が偽役職の場合、自役職の視点オブジェクトとは異なる値が入っている。  
COや占い結果などにより破綻が起きやすい。  
アクション選択時はこちらを参照する。

### 共通視点オブジェクト（commonPerspective）
村全体の視点。最も最大公約数的な視点。  
共通視点が、全キャラの視点のどれよりも少ない値をとることはない。  
もしも共通視点オブジェクトが破綻した場合、ゲームは続行不可能になる。

### 破綻（isContradicted）
何らかの行動を受けて視点オブジェクトを更新した結果、「あるキャラがどの役職に就いている可能性もなくなってしまった」場合に、そのキャラは破綻したことになる。  
（例：自分が占い師COしている狂人であり、Aを●とCOしていた（=CO役職の視点オブジェクト上は必ず人狼）が、Aが投票で追放されてもゲームが続行した）  
破綻したキャラは、他のキャラの視点上「嘘がつける役職だった（=占い師と村人の可能性がzeronizeされる）」という扱いを受ける。  
また、破綻したキャラはそのままでは視点オブジェクトが破綻し続ける一方なので、破綻した時点で共通視点オブジェクトに差し替える。  
  
なお、共通視点オブジェクトが破綻した場合はゲームの続行が不可能になり、警告を表示する。その後はゲームの正常動作を保証しない。  
上記の状態を、ゲーム「グノーシア」において同様の現象が発生した場合のイベントに倣い「水そうめん」状態と呼ぶこととする。

### 同陣営割合
あるキャラクターの視点オブジェクトにおいて、自分の役職と同陣営である役職の割合を単純に合計した値のこと。  
自分と必ず同陣営なら1（小数の場合もあるため必ず1とは限らない）、必ず敵陣営なら0。

## 信頼度（reliabirity）
「そのキャラの、（自分自身を含む）各キャラに対する印象や信頼度合いを表す数値」のオブジェクト。  
占い結果COやアクション、投票などにより常に変動する。  
ゲーム開始時にランダムな数値をとる。  
取りうる範囲は0～1。性格ごとに決められた閾値以上になると「love状態」、閾値未満になると「hate状態」になる。
信頼度は視点オブジェクトとは異なり、人狼ゲーム内の真実とは全く関連性がない。
```
{
    "zundamon":0.4381942103972798,
    "metan":0.2155763100184117,
    "tsumugi":0.36988567748274304,
    "hau":0.5011170304156347,
    "ritsu":0.6166512482353597
}
```
### love状態/hate状態
文字通り、そのキャラに対して心酔している状態や、嫌悪している状態を意味する。
love状態またはhate状態になっている相手に対しては、neutral状態（通常）とは信頼度の計算方法が変わる。  
「love状態のキャラのことを疑ったキャラに対しての信頼度は大きく下げる」  
「○を出した占い師と出されたキャラがどちらもhate状態の場合、人狼陣営同士の白打ちだと判断して信頼度を上げない」など。

## 論理力（logical）
性格パラメータの一つ。  
「そのキャラがどれだけ論理（=視点オブジェクト）に重きをおいた判断をするか」を表す数値。
取りうる範囲は0～1。  

## 仲間度（sameFactionPossivility）
「自分にとって、各キャラクターを仲間と思っている度合い」を数値化したオブジェクト。  
論理力が低いほど、対象キャラへの信頼度が「仲間度」になる（＝感情的な判断）  
論理力が高いほど、同陣営割合値の合計が「仲間度」になる（＝論理的な判断）  
以下の計算で算出する。  
```
対象キャラの仲間度 = (1 - 自分の論理力) * 対象キャラの信頼度 +
                    自分の論理力      * 対象キャラの同陣営割合
```
TODO:possibilityが正しいので修正する。
